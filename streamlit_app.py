import streamlit as st
from utils.calculator import daily_decision

st.set_page_config(page_title="Daily Latex Decision", layout="centered")

st.title("üß™ ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏á (‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô)")

st.markdown("‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏≠‡∏Å‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ß‡πà‡∏≤‡∏Ñ‡∏ß‡∏£ **‡∏ú‡∏•‡∏¥‡∏ï / ‡πÄ‡∏Å‡πá‡∏ö / ‡∏Ç‡∏≤‡∏¢‡∏ó‡∏¥‡πâ‡∏á**")

# -------------------------
# INPUT
# -------------------------
R_today = st.number_input(
    "‡∏ô‡πâ‡∏≥‡∏¢‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ (‡∏Å‡∏Å.)",
    min_value=0.0,
    value=70000.0
)

price_day_4 = st.number_input(
    "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏¢‡∏≤‡∏á‡πÅ‡∏ú‡πà‡∏ô‡∏£‡∏°‡∏Ñ‡∏ß‡∏±‡∏ô (‡∏≠‡∏µ‡∏Å 1 ‡∏ß‡∏±‡∏ô)",
    min_value=0.0,
    value=52.0
)

price_day_5 = st.number_input(
    "‡∏£‡∏≤‡∏Ñ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏¢‡∏≤‡∏á‡πÅ‡∏ú‡πà‡∏ô‡∏£‡∏°‡∏Ñ‡∏ß‡∏±‡∏ô (‡∏≠‡∏µ‡∏Å 2 ‡∏ß‡∏±‡∏ô)",
    min_value=0.0,
    value=54.0
)

# -------------------------
# RUN
# -------------------------
if st.button("üîç ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ"):
    result = daily_decision(
        R_today=R_today,
        price_today_plus_4=price_day_4,
        price_today_plus_5=price_day_5
    )

    st.success("‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß")

    st.subheader("üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à")

    st.write(f"üè≠ ‡∏ú‡∏•‡∏¥‡∏ï: **{result['produce']:,.0f} ‡∏Å‡∏Å.**")
    st.write(f"üì¶ ‡πÄ‡∏Å‡πá‡∏ö stock: **{result['hold']:,.0f} ‡∏Å‡∏Å.**")
    st.write(f"‚ùå ‡∏Ç‡∏≤‡∏¢‡∏ó‡∏¥‡πâ‡∏á: **{result['dispose']:,.0f} ‡∏Å‡∏Å.**")

    st.info(f"üß† ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•: {result['reason']}")
